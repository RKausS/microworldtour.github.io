<!DOCTYPE html>
<html>
    <head>
        <title>Mohandas micro:bit's World Tour</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta charset="UTF-8" />
        <link rel="shortcut icon" href="/img/microicon.png" />
        <link rel="stylesheet" href="/css/style.css" />
        <link rel="stylesheet" href="/css/leaflet.css" />
        <link href='https://fonts.googleapis.com/css?family=Roboto:400,700,500italic' rel='stylesheet' type='text/css'>
        <script src="/js/leaflet.js"></script>
        <script src="/js/leaflet.polylineDecorator.min.js"></script>
        <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=python"></script>
    </head>
    <body class="mohandas">
        <header>
            <h1 class="homepage-title"><a href="/"><span>micro:bit</span><span class="microbit large-icon"></span><span>worldtour</span></a></h1>
            <nav class="nav">
                <ul>
                    <li><a href="/microbit/mary.html" id="mary" class="mary"><span>Mary</span><div class="microbit mary"></div></a></li>
                    <li><a href="/microbit/meena.html" id="meena" class="meena"><span>Meena</span><div class="microbit meena"></div></a></li>
                    <li><a href="/microbit/meixiu.html" id="meixiu" class="meixiu"><span>Mei Xiu</span><div class="microbit dead"></div></a></li>
                    <li><a href="/microbit/mohandas.html" id="mohandas" class="mohandas"><span>Mohandas</span><div class="microbit mohandas"></div></a></li>
                    <li><a href="/microbit/monifa.html" id="monifa" class="monifa"><span>Monifa</span><div class="microbit monifa"></div></a></li>
                    <li> <a href="/microbit/mahiri.html" id="mahiri" class="mahari"><span>Mahari</span><div class="microbit dead"></div></a></li>
                    <li><a href="/microbit/marja.html" id="marja" class="marja"><span>Marja</span><div class="microbit marja"></div></a></li>
                    <li><a href="/about.html" class="about"><span>About</span>
                        <span class="globe">
                            <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                 width="200px" height="200px" viewBox="0 0 439.333 439.333" enable-background="new 0 0 439.333 439.333"
                                 xml:space="preserve">
                                 <g class="earth">
                                    <circle fill="#49C3CC" cx="219.667" cy="219.667" r="200"/>
                                    <path fill="none" stroke="#53B848" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="M67.603,219.667
                                        c0-12.524,1.514-24.694,4.369-36.338c11.039-45.021,42.126-82.168,83.258-101.438"/>
                                    <path fill="none" stroke="#53B848" stroke-width="36" stroke-linecap="round" stroke-miterlimit="10" d="M130.964,319.663
                                        C103.381,295.176,86,259.451,86,219.667C86,145.844,145.844,86,219.667,86"/>
                                    <path opacity="0.57" fill="none" stroke="#BED1D4" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M38.639,292.29c-9.013-22.445-13.972-46.955-13.972-72.623c0-62.626,29.522-118.357,75.41-154.035"/>
                                    <path opacity="0.51" fill="none" stroke="#BED1D4" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M85.99,343.667c-30.194-32.535-48.656-76.111-48.656-124c0-38.778,12.105-74.729,32.744-104.279"/>
                                    <path opacity="0.47" fill="none" stroke="#BED1D4" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M112.667,209.667c0-24.224,8.879-46.373,23.561-63.372"/>
                                    <path fill="none" stroke="#53B848" stroke-width="60" stroke-linecap="round" stroke-miterlimit="10" d="M219.667,142
                                        c9.111,0,17.855,1.569,25.979,4.451c30.119,10.687,51.688,39.432,51.688,73.216c0,26.809-13.583,50.445-34.242,64.402"/>
                                    <path fill="none" stroke="#53B848" stroke-width="35" stroke-linecap="round" stroke-miterlimit="10" d="M402.049,219.667
                                        c0,1.749-0.024,3.492-0.073,5.229c-0.433,15.352-2.763,30.228-6.763,44.404"/>
                                    <path fill="none" stroke="#53B848" stroke-width="33" stroke-linecap="round" stroke-miterlimit="10" d="M219.667,36.667
                                        c17.454,0,34.337,2.443,50.326,7.007c18.544,5.293,35.886,13.438,51.52,23.93"/>
                                    <path opacity="0.57" fill="none" stroke="#BED1D4" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M364.939,89.508c16.146,18.009,29.188,39.345,37.968,63.464c21.42,58.851,12.738,121.317-18.179,170.538"/>
                                    <path opacity="0.51" fill="none" stroke="#BED1D4" stroke-width="42" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M302.872,57.424c39.501,20.246,71.754,54.88,88.133,99.88c13.263,36.439,14.183,74.363,4.896,109.19"/>
                                    <path fill="none" stroke="#53B848" stroke-width="28" stroke-linecap="round" stroke-miterlimit="10" d="M361.714,338.752
                                        c-31.898,38.807-79.065,64.587-132.316,68.154c-4.208,0.282-8.453,0.426-12.731,0.426"/>
                                    <path opacity="0.57" fill="none" stroke="#BED1D4" stroke-width="58" stroke-linecap="round" stroke-miterlimit="10" d="
                                        M327.892,280.236c-21.229,37.852-61.739,63.431-108.226,63.431c-31.532,0-60.315-11.77-82.196-31.155"/>
                                </g>
                            </svg>
                        </span>
                    </a></li>
              </ul>
            </nav>

            <div class="mobile-nav">
                <h1 class="homepage-title">micro:bit worldtour<label for="mobile-menu-toggle"><span class="hidden">menu</span></label></h1>
                <input type="checkbox" id="mobile-menu-toggle">
                <ul class="mobile-menu">
                    <li><a href="/microbit/mary.html" id="mary" class="mary"><div class="microbit mary"></div><span>Mary</span></a></li>
                    <li><a href="/microbit/meena.html" id="meena" class="meena"><div class="microbit meena"></div><span>Meena</span></a></li>
                    <li><a href="/microbit/meixiu.html" id="meixiu" class="meixiu"><div class="microbit dead"></div><span>Mei Xiu</span></a></li>
                    <li><a href="/microbit/mohandas.html" id="mohandas" class="mohandas"><div class="microbit mohandas"></div><span>Mohandas</span></a></li>
                    <li><a href="/microbit/monifa.html" id="monifa" class="monifa"><div class="microbit monifa"></div><span>Monifa</span></a></li>
                    <li> <a href="/microbit/mahiri.html" id="mahiri" class="mahari"><div class="microbit dead"></div><span>Mahari</span></a></li>
                    <li><a href="/microbit/marja.html" id="marja" class="marja"><div class="microbit marja"></div><span>Marja</span></a></li>
                </ul>
            </div>
        </header>
        <div class="page-content">
            <h1 class="page-title">Mohandas micro:bit</h1>
            <div id="map" class="fragment"></div>
            <div class="content">
                <!-- ADD NEW ENTRIES HERE -->
                <div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
    			<div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="https://avatars2.githubusercontent.com/u/1026649?v=3&s=460" alt="Nick's GitHub avatar" />
                        <p>
                            <span class="name">Nick Coghlan</span>
                            <span class="location">Brisbane, AUS.</span>
                        </p>
                        <p>
                            <span class="date">Monday, 18th January 2016</span>
                        </p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
                        <p>When I received the Mohandas micro:bit, I had two goals:</p>
                        <ul>
                            <li>Setting up a Docker image to make it easier to get started hacking on the micro:bit</li>
                            <li>
                                Creating my own micro:bit experiment doing zero-cross detection on the signal from a small
                                <a href="http://littlebirdelectronics.com.au/products/breakout-board-for-electret-microphone">
                                electret microphone</a>
                            </li>
                        </ul>
                        <p>After some interesting <a href="https://github.com/lancaster-university/microbit-targets/issues/1">
                        detours</a>, and the introduction of dependency version constraints for both
                        <a href="https://github.com/bbcmicrobit/micropython/pull/146">micropython</a> and
                        <a href="https://github.com/ntoll/microrepl/pull/6">microrepl</a></p>, I was able to publish
                        a micro:bit MicroPython build environment to DockerHub as
                        <a href="https://hub.docker.com/r/ncoghlan/microbit-dev/">ncoghlan/microbit-dev</a>.</p>
                        <p>That image includes a full yotta build environment together with Nicholas Tollervey's
                        <a href="https://github.com/ntoll/microrepl/">microrepl</a> project, making it straightforward both to
                        use the micro:bit interactively, and to build new custom firmware images. There unfortunately appears to
                        be a <a href="https://github.com/bbcmicrobit/micropython/issues/156">bug</a> with using the pyboard utility
                        from within a Docker container, so it currently isn't possible to use that to upload and run scripts on
                        the device directly from within the container.</p>
                        <p>Together with other interruptions, getting a reliable build container together took longer than
                        I anticipated though, so I never got to starting on the second goal - instead, I'll include the
                        microphone along with Mark Schafer's 3D printed micro:bit diffuser in the package I pass along to
                        the next Mohandas recipient, Clinton Roy</p>
                    </div>
                </div>
    			<div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="http://i67.tinypic.com/2rmxzf4.jpg" alt="One of Mark's Neon Artworks" />
                        <p>
                            <span class="name">Mark Schafer</span>
                            <span class="location">Auckland, NZ.</span>
                        </p>
                        <p>
                            <span class="date">Monday, 7th December 2015</span>
                        </p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
    					<p>After many days of fruitless work I have not succeeded in creating the neopixel library.
    					I was using the neopixel branch in the <a href="https://github.com/bbcmicrobit/micropython">bbcmicrobit repository</a>
    					But my C language skills are not up to it.</p>
    					<p>I have sent the Microbit onto Nick Coghan in Australia for the next step in Mohandas's journey.</p>
                    </div>
                </div>
    			<div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="http://i67.tinypic.com/2rmxzf4.jpg" alt="One of Mark's Neon Artworks" />
                        <p>
                            <span class="name">Mark Schafer</span>
                            <span class="location">Auckland, NZ.</span>
                        </p>
                        <p>
                            <span class="date">Tuesday, 1st December 2015</span>
                        </p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
    					<p>The fire simulation is working pretty well but a diffuser would soften the pinpoints and make it look much better.
    					The simplest way is to put a piece of paper on top of the LEDs. It needs some separation between the LEDs and the paper
    					to soften the glow. So I decided to do it the hard way and quickly write something in OpenSCAD and print
    					it out on a 3D printer. The 3D file is hosted on thingiverse here:
    					<a href="https://github.com/Neon22/Microbit-code">Microbit Diffuser</a></p>
    					<p><img class="figure" src="http://i67.tinypic.com/2v3r38m.jpg"></p>
    					<p>The program uses the two buttons to control the delay between frames and the amount of interpolation that occurs
    					between new lines of fire being added. The program works in the following way:</p>
    					<p>It starts by making a line of brightness points on the bottom row of the display.
    					Each time it generates a new line, it moves the previous one up. But this is not what makes it look like fire.</p>
    					<p>To do this we do interpolation frames between the major "new line of fire" frames. The interpolation looks
    					at a line and its preceeding one and performs an interpolation to calculate an intermediate frame.
    					This is done several times before a new line of fire points is added to the bottom row.</p>
    					<p>We also multiply the resulting pixel values by a mask. This mask tapers off the values
    					and gives us a kind of shape to the grid instead of a square block.</p>
    					<p>Here's a video of the fire in action, both without and with the 3D diffuser.</p>
    					<div class="video-container">
                        <iframe width="854" height="480" src="https://www.youtube.com/embed/RGkcIaoIJJc" frameborder="0" allowfullscreen></iframe>
    					</div>
                    </div>
                </div>
    			<div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="http://i67.tinypic.com/2rmxzf4.jpg" alt="One of Mark's Neon Artworks" />
                        <p>
                            <span class="name">Mark Schafer</span>
                            <span class="location">Auckland, NZ.</span>
                        </p>
                        <p>
                            <span class="date">Monday, 30th November 2015</span>
                        </p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
                        <p>Finally got everything sorted out, building, checkouts, talking to the Microbit. All set to go.
    					Thought I'd start with a little program to simulate fire on the display. I'm using the
    					mechanism where you type in a command and it transfers the program to the Microbit, runs it
                        and reports any messages (errors, print(), etc) directly back to you. Good for debugging. Looks like this:
                        <pre class="prettyprint">micropython/tools/pyboard.py /dev/ttyACM0 your_code.py</pre>Where the "pyboard.py" program is from the cloned
    					<a href="https://github.com/bbcmicrobit/micropython">repository</a>, "your_code.py" is your
    					program, and "ttyACM0" is the USB port for communicating with the Microbit.</p>
    					<p>So I started a fire simulation program. Needed to choose between making and updating
    					an Image, and then telling the display to show it, or setting pixel values directly in the display.
    					In the end I went with <pre class="prettyprint">display.set_pixel(x, y, value)</pre> to make the code small.
    					There's nota lot of room on the Microbit and all the comments are  included in the memory footprint of the code.
    					This means I need to try to keep the programs small.</p>
    					<p>The code for this is on the <a href="https://github.com/Neon22/Microbit-code">github repo here</a>
    					</p>
    					<p>The fire simulation is working pretty well but a diffuser would soften the pinpoints and make it look much better.
    					I'll try for one tomorrow. Here we can see the code that generates a new line of fire points <pre class="prettyprint">
    # Generate a new bottom row of random values for the flames
    def generate_line(line, start=min_brightness, end=max_brightness):
        "start and end define range of dimmest to brightest 'flames'"
        for i in range(display_width):
            line[i] = start + microbit.random(end-start)</pre>The function takes in an array of 5 values, called line, and
    		puts 5 new random values into it. The range of the values represents the brightness of the flames.</p>
                    </div>
                </div>
                <!-- OLDER ENTRIES GO AT THE BOTTOM -->
                <div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="http://i67.tinypic.com/2rmxzf4.jpg" alt="One of Mark's Neon Artworks" />
                        <p>
                            <span class="name">Mark Schafer</span>
                            <span class="location">Auckland, NZ.</span>
                        </p>
                        <p><span class="date">Friday, 27th November 2015</span></p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
                        <p>Spent the day setting up my Ubuntu14.04LTS machine and getting git and the other tools
                        on. Because I'm developing a new library, I have more to do than the usual user.</p>
                        <p>Needed to work out how to build from the repo using Yotta, as well as download and
                        connect using a serial terminal program. I ended up using <a href="https://apps.ubuntu.com/cat/applications/gtkterm/"> gtkterm</a> which is pretty useful
                        on Linux. Making lots of notes to pass back to Nicholas for the next person.</p>
    					<p>Typing: <pre class="prettyprint">dmesg | grep tty</pre> at a linux command line prompt tells you which
    					serial port the Microbit connected as, when you plugged it in.</p>
                    </div>
                </div>
                <div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="http://i67.tinypic.com/2rmxzf4.jpg" alt="One of Mark's Neon Artworks" />
                        <p>
                            <span class="name">Mark Schafer</span>
                            <span class="location">Auckland, NZ.</span>
                        </p>
                        <p><span class="date">Saturday, 28th November 2015</span></p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
                        <p>Yay the Microbit arrived today. I'll start setting up
                        the machine and logging how it goes tomorrow. Very exciting!</p>
                    </div>
                </div>
                <!-- OLDER ENTRIES GO AT THE BOTTOM -->
                <div class="entry"> <!-- ALL ENTRIES SHOULD LOOK LIKE THIS -->
                    <div class="headline"> <!-- Contains details of recipient -->
                        <img src="https://pbs.twimg.com/profile_images/283774940/100_5406_2_bigger.JPG" alt="A picture of Nicholas" />
                        <p>
                            <span class="name">Nicholas Tollervey</span>
                            <span class="location">Towcester, UK.</span>
                        </p>
                        <p>
                            <span class="date">Saturday, 7th November 2015</span>
                        </p>
                    </div>
                    <div class="log"> <!-- Contains a log of the results -->
                        <p>I've finally finished the website and I'm ready to
                        post Mohandas micro:bit to Mark Schafer.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <h1>micro:bit worldtour</h1>
            <span class="microbit"></span>
            <p>Design by <a href="http://www.blanc.ltd.uk/">Blanc</a></p>
        </div>
        <script src="/js/microworldtour.js"></script>
        <script src="mohandas.js"></script>
    </body>
</html>

